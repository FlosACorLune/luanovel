{% extends 'manga/base.html' %}

{% block content %}
<div class="reader-container">
    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <header class="reader-header">
        <!-- –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
        <div class="back-menu">
            <button class="back-button" onclick="toggleBackMenu()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            
            <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é -->
            <div class="back-dropdown" id="backDropdown">
                <a href="/manga/{{ manga.slug }}/" class="dropdown-item">
                    <span>üìñ</span> Details
                </a>
                <a href="/" class="dropdown-item">
                    <span>üè†</span> Main
                </a>
            </div>
        </div>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥–ª–∞–≤–∞–º -->
        <div class="chapter-nav">
            <button class="nav-arrow" onclick="previousChapter()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 18l-6-6 6-6"/>
                </svg>
            </button>
            
            <span class="chapter-info">Vol {{ chapter.volume }} Ch {{ chapter.number }}</span>
            
            <button class="nav-arrow" onclick="nextChapter()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6"/>
                </svg>
            </button>
        </div>
        
        <!-- –ü—Ä–∞–≤—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <div class="reader-actions">
            <button class="icon-btn" onclick="toggleBookmark()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                </svg>
            </button>
            
            <button class="icon-btn" onclick="toggleSettings()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                </svg>
            </button>
        </div>
        
        <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div class="settings-dropdown" id="settingsDropdown">
            <div class="settings-title">–†–µ–∂–∏–º —á—Ç–µ–Ω–∏—è</div>
            <button class="settings-option" onclick="setReadingMode('horizontal')">
                <span>‚ÜîÔ∏è</span> –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π
            </button>
            <button class="settings-option" onclick="setReadingMode('vertical')">
                <span>‚ÜïÔ∏è</span> –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π
            </button>
        </div>
    </header>
    
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="reader-sidebar">
        <button class="sidebar-tab active">Main</button>
        <button class="sidebar-tab">Description</button>
    </aside>
    
    <!-- –û–±–ª–∞—Å—Ç—å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü -->
    <main class="reader-main" id="readerMain">
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü...</div>
    </main>
</div>

<script>
let currentReadingMode = 'vertical'; // –∏–ª–∏ 'horizontal'

function toggleBackMenu() {
    const dropdown = document.getElementById('backDropdown');
    dropdown.classList.toggle('show');
}

function toggleSettings() {
    const dropdown = document.getElementById('settingsDropdown');
    dropdown.classList.toggle('show');
}

function setReadingMode(mode) {
    currentReadingMode = mode;
    const readerMain = document.getElementById('readerMain');
    
    if (mode === 'horizontal') {
        readerMain.classList.add('horizontal-mode');
        readerMain.classList.remove('vertical-mode');
    } else {
        readerMain.classList.add('vertical-mode');
        readerMain.classList.remove('horizontal-mode');
    }
    
    toggleSettings();
}

function toggleBookmark() {
    alert('–ó–∞–∫–ª–∞–¥–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
}

function previousChapter() {
    // TODO: –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ
    alert('–ü—Ä–µ–¥—ã–¥—É—â–∞—è –≥–ª–∞–≤–∞');
}

function nextChapter() {
    // TODO: –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ
    alert('–°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞');
}

// –ó–∞–∫—Ä—ã—Ç—å –≤—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
document.addEventListener('click', function(e) {
    if (!e.target.closest('.back-menu')) {
        document.getElementById('backDropdown').classList.remove('show');
    }
    if (!e.target.closest('.reader-actions')) {
        document.getElementById('settingsDropdown').classList.remove('show');
    }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü (–ø—Ä–∏–º–µ—Ä)
window.addEventListener('load', function() {
    // TODO: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–ª–∞–≤—ã —á–µ—Ä–µ–∑ API
    const readerMain = document.getElementById('readerMain');
    readerMain.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 100px;">–°—Ç—Ä–∞–Ω–∏—Ü—ã –≥–ª–∞–≤—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å</p>';
});
</script>
{% endblock %}